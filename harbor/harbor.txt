1.安装docker
配置阿里云源
wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
####查看版本号
yum list docker-ce --showduplicates | sort -r
systemctl start docker && systemctl enable docker
2.安装Docker-compose
1、下载指定版本的docker-compose
curl -L https://github.com/docker/compose/releases/download/1.23.2/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
####查看版本号
docker-compose --version
pip安装：
yum install python-pip -y
pip install --upgrade pip
pip install docker-compose
3.安装Harbor
github地址
https://github.com/goharbor/harbor/releases
4.配置Harbor
解压缩之后，目录下回生成harbor.conf文件，该文件就是Harbor的配置文件。
1 ## Configuration file of Harbor
 2 
 3 # hostname设置访问地址，可以使用ip、域名，不可以设置为127.0.0.1或localhost
 4 hostname = 172.33.16.1   #需要根据实际情况手动修改
 5 
 6 # 访问协议，默认是http，也可以设置https，如果设置https，则nginx ssl需要设置on
 7 ui_url_protocol = http
 8 
 9 # mysql数据库root用户默认密码root123，实际使用时修改下
10 db_password = root123
11 
12 max_job_workers = 3 
13 customize_crt = on
14 ssl_cert = /data/cert/server.crt
15 ssl_cert_key = /data/cert/server.key
16 secretkey_path = /data
17 admiral_url = NA
18 
19 # 邮件设置，发送重置密码邮件时使用
20 email_identity = 
21 email_server = smtp.mydomain.com
22 email_server_port = 25
23 email_username = sample_admin@mydomain.com
24 email_password = abc
25 email_from = admin <sample_admin@mydomain.com>
26 email_ssl = false
27 
28 # 启动Harbor后，管理员UI登录的密码，默认是Harbor12345
29 harbor_admin_password = Harbor12345
30 
31 # 认证方式，这里支持多种认证方式，如LADP、本次存储、数据库认证。默认是db_auth，mysql数据库认证
32 auth_mode = db_auth
33 
34 # LDAP认证时配置项
35 #ldap_url = ldaps://ldap.mydomain.com
36 #ldap_searchdn = uid=searchuser,ou=people,dc=mydomain,dc=com
37 #ldap_search_pwd = password
38 #ldap_basedn = ou=people,dc=mydomain,dc=com
39 #ldap_filter = (objectClass=person)
40 #ldap_uid = uid 
41 #ldap_scope = 3 
42 #ldap_timeout = 5
43 
44 # 是否开启自注册
45 self_registration = on
46 
47 # Token有效时间，默认30分钟
48 token_expiration = 30
49 
50 # 用户创建项目权限控制，默认是everyone（所有人），也可以设置为adminonly（只能管理员）
51 project_creation_restriction = everyone
52 
53 verify_remote_cert = on
5.启动harbor
修改完配置文件后，在的当前目录执行./install.sh，Harbor服务就会根据当期目录下的docker-compose.yml开始下载依赖的镜像，检测并按照顺序依次启动各个服务
./install.sh 
#后续可以使用docker-compose [start|stop] 命令在docker-compose.yml文件所在目录下来关闭和启动harbor
